<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>NFC - Registration Form</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript">
    </script>
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css'>
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css'>
    <link rel='stylesheet'
        href='https://cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.0/css/bootstrapValidator.min.css'>
</head>

<style>
    .container {
        height: 100vh;
        position: relative;
    }

    .well {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        left: 0;
        right: 0;
    }
</style>

<body translate="no">
    <div class="container">
        <div class="start well">
            <h2 style=" text-align: center; padding-bottom: 20px;">Please attach an Unregistered card</h2>
        </div>

        <div class="taken well" style="display: none;">
            <h2 style="text-align: center; padding-bottom: 20px;">This card is registered already to:
                <span class="person"></span></h2>
            <button type="button" class="btn btn-danger deleteAction">Delete this user</button>
            <span class="result" style="padding-left: 30px;"></span>
        </div>

        <form class="well form-horizontal" action="" method="post" id="registration_form" style="display: none;">
            <fieldset>
                <h3 class="col-md-12" style="text-align: center; padding-bottom: 20px;">Register New User</h3>
                <div class="form-group">
                    <label class="col-md-4 control-label">Name</label>
                    <div class="col-md-4 ">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input name="name" placeholder="Name" class="form-control" type="text">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-4 control-label">Country</label>
                    <div class="col-md-4 ">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input name="country" placeholder="Country" class="form-control" type="text">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-4 control-label">Company</label>
                    <div class="col-md-4 ">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <select class="form-control" id="exampleFormControlSelect1">                              
                                <option data-hex="#582C83" data-hue="50203" value="10ft">10x Future Technologies Ltd</option>
                                <option data-hex="#032B37" data-hue="46494" value="21c">21C</option>
                                <option data-hex="#002664" data-hue="42249" value="asi">Aberdeen Standard Investments</option>
                                <option data-hex="#013781" data-hue="45728" value="agcs">AGCS UK</option>
                                <option data-hex="#0D395A" data-hue="45728" value="agtb">AGTB</option>
                                <option data-hex="#646566" data-hue="50739" value="aimia">AIMIA</option>
                                <option data-hex="#E01A21" data-hue="65468" value="aon">Aon</option>
                                <option data-hex="#0D5597" data-hue="44740" value="avas">Avasant Limited UK</option>
                                <option data-hex="#FF5000" data-hue="2356" value="baps">BAPS</option>
                                <option data-hex="#00AEEF" data-hue="43220" value="barc">Barclays Bank PLC</option>
                                <option data-hex="#1C1C1C" data-hue="48322" value="bow">Bower</option>
                                <option data-hex="#4B9942" data-hue="25400" value="bp">BP</option>
                                <option data-hex="#392177" data-hue="49134" value="bi">Brit Insurance</option>
                                <option data-hex="#0079C8" data-hue="46047" value="bupa">BUPA Global Holdings</option>
                                <option data-hex="#043F36" data-hue="25400" value="bop">Burnt Oak Partners</option>
                                <option data-hex="#827F77" data-hue="7977" value="cc">Cavendish Communications</option>
                                <option data-hex="#1C1C1C" data-hue="48322" value="csm">Central Saint Martins</option>
                                <option data-hex="#064F94" data-hue="46494" value="charl">Charles Taylor</option>
                                <option data-hex="#1C1C1C" data-hue="65468" value="col">City of London</option>
                                <option data-hex="#2B2170" data-hue="49376" value="coii">Confederation of Indian Industry</option>
                                <option data-hex="#E5720A" data-hue="2356" value="cd">Currencies Direct</option>
                                <option data-hex="#1C1C1C" data-hue="65173" value="dit">Department of International Trade</option>
                                <option data-hex="#1C1C1C" data-hue="65173" value="dia">Diageo</option>
                                <option data-hex="#2A1656" data-hue="63773" value="dlip">Direct Line Insurance Group</option>
                                <option data-hex="#004C6C" data-hue="46494" value="dit">DIT</option>
                                <option data-hex="#EDBE00" data-hue="7977" value="ey">EY</option>
                                <option data-hex="#212121" data-hue="65468" value="far">Farfetch</option>
                                <option data-hex="#212121" data-hue="7977" value="ft">Fever Tree</option>
                                <option data-hex="#32B26D" data-hue="25400" value="fika">Fika</option>
                                <option data-hex="#7399C6" data-hue="42544" value="gs">Goldman Sachs</option>
                                <option data-hex="#D03C54" data-hue="62873" value="headbox">Headbox</option>
                                <option data-hex="#1C1C1C" data-hue="48322" value="high">High Commission</option>
                                <option data-hex="#1C1C1C" data-hue="48322" value="hmtc">HMTC</option>
                                <option data-hex="#EF0000" data-hue="65468" value="hsbc">HSBC</option>
                                <option data-hex="#017BA7" data-hue="44306" value="husky">Husky Finance</option>
                                <option data-hex="#2C7DBE" data-hue="44306" value="idc">IDC</option>
                                <option data-hex="#FE0000" data-hue="65468" value="iuds">Iese Universidad De Navarra</option>
                                <option data-hex="#023B72" data-hue="46804" value="icl">Imperial College London</option>
                                <option data-hex="#1D58A5" data-hue="46865" value="iig">India Inc Group</option>
                                <option data-hex="#5F9FDB" data-hue="46865" value="inve">Investec</option>
                                <option data-hex="#1C1C1C" data-hue="48322" value="isg">ISG</option>
                                <option data-hex="#DE2B24" data-hue="65468" value="kcl">Kings College London</option>
                                <option data-hex="#006A4D" data-hue="25400" value="lloyds">Lloyds</option>
                                <option data-hex="#C9271D" data-hue="65468" value="mgp">M&G Prudential</option>
                                <option data-hex="#C8002F" data-hue="12363" value="mint">Markel International</option>
                                <option data-hex="#1C1C1C" data-hue="48322" value="mo">Mayor's Office</option>
                                <option data-hex="#0042FE" data-hue="45985" value="myww">MYWW</option>
                                <option data-hex="#B31E2A" data-hue="64186" value="nass">Nasscom</option>
                                <option data-hex="#5D717E" data-hue="46494" value="pac">PA Consulting</option>
                                <option data-hex="#D8D8D8" data-hue="45985" value="pierre">Pierre Audoin Consultants Pac</option>
                                <option data-hex="#1C1C1C" data-hue="48322" value="proc">Procreate London</option>
                                <option data-hex="#1C1C1C" data-hue="48322" value="project">Project Storey</option>
                                <option data-hex="#C9271D" data-hue="65468" value="prud">Prudential</option>
                                <option data-hex="#002D64" data-hue="45985" value="rbs">RBS</option>
                                <option data-hex="#EDBE00" data-hue="7977" value="rds">Royal Dutch Shell</option>
                                <option data-hex="#ED8B00" data-hue="2356" value="sains">Sainsbury's</option>
                                <option data-hex="#029FDD" data-hue="46494" value="sales">Salesforce</option>
                                <option data-hex="#2670B7" data-hue="45985" value="san">Sanlam</option>
                                <option data-hex="#FF0000" data-hue="65468" value="sant">Santander</option>
                                <option data-hex="#3D3C3D" data-hue="65468" value="sara">Saranac Partners</option>
                                <option data-hex="#FF0700" data-hue="65468" value="site">Sitecore</option>
                                <option data-hex="#00DC4D" data-hue="26013" value="spot">Spotify</option>
                                <option data-hex="#1C1C1C" data-hue="48322" value="sf">Studio Fibre</option>
                                <option data-hex="#01273F" data-hue="41871" value="tech">techuk</option>
                                <option data-hex="#FFC300" data-hue="7977" value="tele">Telenet</option>
                                <option data-hex="#54a9e5" data-hue="46494" value="thg">The Hackett Group</option>
                                <option data-hex="#1C1C1C" data-hue="48322" value="tian">The Independent Advisory Network</option>
                                <option data-hex="#ED0017" data-hue="65468" value="toyota">Toyota Connected Europe LTD</option>
                                <option data-hex="#CB2D2F" data-hue="65468" value="trav">Travelers</option>
                                <option data-hex="#1C1C1C" data-hue="65468" value="ubs">UBS</option>
                                <option data-hex="#FF0000" data-hue="65468" value="vm">Virgin media</option>
                                <option data-hex="#009CDD" data-hue="42698" value="ww">Welsh Water</option>
                                <option data-hex="#FF0000" data-hue="65468" value="wp">WorldPay</option>
                                <option data-hex="#FF007A" data-hue="58073" value="zee">Zeelo</option>
                                <option data-hex="#007cc2" data-hue="46494" value="infy">InfoSys</option>
                                <option data-hex="#2C66E7" data-hue="46494" value="bb">BB / Other</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-4 control-label">Title</label>
                    <div class="col-md-4 ">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input name="title" placeholder="Title" class="form-control" type="text">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-4 control-label">Email</label>
                    <div class="col-md-4 ">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input name="email" placeholder="Email" class="form-control" type="text">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-4 control-label">CompanyNumber</label>
                    <div class="col-md-4 ">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input name="companyNumber" placeholder="CompanyNumber" class="form-control" id="cNumber" type="text">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-4 control-label">CompanyAddress</label>
                    <div class="col-md-4 ">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input name="companyAddress" placeholder="CompanyAddress" class="form-control" type="text">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-4 control-label">Company Color 1</label>
                    <div class="col-md-4 ">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input name="companyColor1" placeholder="CompanyColor1" class="form-control" type="text" id="cColor">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-4 control-label">Company Color 2</label>
                    <div class="col-md-4 ">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input name="companyColor2" placeholder="CompanyColor2" class="form-control" type="text">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-4 control-label">Company Color 3</label>
                    <div class="col-md-4 ">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input name="companyColor3" placeholder="CompanyColor3" class="form-control" type="text">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-4 control-label"></label>
                    <div class="col-md-8 ">
                        <button type="submit" class="btn btn-success">Register User</button>
                        <span class="result"></span>
                    </div>
                </div>

            </fieldset>
        </form>
    </div>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script>
    <script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js'></script>

    <script id="rendered-js">
        $(document).ready(function () {
            var socket = io('http://localhost:1337');
            socket.on('Welcome to NFC', function (data) {
                console.log('SOCKET - Welcome to NFC connected');
            });

            socket.on('Slave_logout', function (data) {
                console.log('SOCKET - Client_register_noCard: ', data);
                $('.taken').fadeOut(200);
                $('form').fadeOut(200);
                $('.start').fadeIn(200);
            });

            socket.on('Slave_login', function (data) {
                console.log('SOCKET - Client_register_exists: ', data);
                $('.taken .person').html(data.name);
                $('.taken .result').html(' ');
                $('.taken .deleteAction').data('id', data.id);

                $('form').fadeOut(200);
                $('.start').fadeOut(200);
                $('.taken').fadeIn(200);
            });

            socket.on('Client_register_readyToRegister', function (data) {
                console.log('SOCKET - Client_register_readyToRegister: ', data);
                $('form').data('id', data);

                $('.taken').fadeOut(200);
                $('.start').fadeOut(200);
                $('form').fadeIn(200);
            });


            // Delete Mangement
            $('.taken .deleteAction').on('click', function () {
                socket.emit('Server_delete_cardUser', $(this).data('id'))
            })

            socket.on('Client_delete_cardUser_error', function (data) {
                console.log('SOCKET - Client_delete_cardUser_error: ', data);
                $('.taken .result').html('ERROR: ' + data);
            });

            socket.on('Client_delete_cardUser_success', function (data) {
                console.log('SOCKET - Client_delete_cardUser_success: ', data);
                $('.taken .result').html('SUCCESS, remove card');
            });



            // Register
            $('form').on('submit', function (event) {
                event.preventDefault();

                let data = {
                    id: $('form').data('id'),
                    name: $("input[name='name']").val(),
                    country: $("input[name='country']").val(),
                    company: $("select").val(),
                    title: $("input[name='title']").val(),
                    email: $("input[name='email']").val(),
                    companyNumber: $("input[name='companyNumber']").val(),
                    companyAddress: $("input[name='companyAddress']").val(),
                    companyColor1: $("input[name='companyColor1']").val(),
                    companyColor2: $("input[name='companyColor2']").val(),
                    companyColor3: $("input[name='companyColor3']").val()
                }

                socket.emit('Server_register_cardUser', data);
            })

            $('form').on('change', 'select', function() {
                console.log($(this).find(':selected').data('hex'));
                $('#cNumber').val($(this).find(':selected').data('hex'));
                $('#cColor').val($(this).find(':selected').data('hue'));
            })

            socket.on('Client_save_error', function (data) {
                console.log('SOCKET - Client_save_error: ', data);
                $('form .result').html('ERROR, remove card and try again.');
            });

            socket.on('Client_save_success', function (data) {
                console.log('SOCKET - Client_save_success: ', data);
                $('form .result').html('SUCCESS, remove card');
                $("input[name='name']").val('');
                $("input[name='country']").val('');
                $("input[name='title']").val('');
                $("input[name='email']").val('');
                $("input[name='companyNumber']").val('');
                $("input[name='companyAddress']").val('');
                $("input[name='companyColor1']").val('');
                $("input[name='companyColor2']").val('');
                $("input[name='companyColor3']").val('');
            });
        });
    </script>
</body>

</html>